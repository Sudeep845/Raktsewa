<!DOCTYPE html>
<html>
  <head>
    <title>API Test</title>
  </head>
  <body>
    <h1>Blood Inventory API Test</h1>
    <div id="result"></div>

    <script>
      // Test the API directly
      fetch("../php/get_hospital_inventory.php?_t=" + Date.now())
        .then((response) => response.json())
        .then((data) => {
          const result = document.getElementById("result");
          if (data.success) {
            const aPlus = data.data.find((item) => item.blood_type === "A+");
            result.innerHTML = `
                        <h2>A+ Blood Status:</h2>
                        <p><strong>Quantity:</strong> ${
                          aPlus.quantity
                        } units</p>
                        <p><strong>Status:</strong> ${aPlus.status}</p>
                        <p><strong>Last Updated:</strong> ${
                          aPlus.last_updated_formatted
                        }</p>
                        <hr>
                        <h3>Full API Response:</h3>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
          } else {
            result.innerHTML = "<p>Error: " + data.message + "</p>";
          }
        })
        .catch((error) => {
          document.getElementById("result").innerHTML =
            "<p>Error: " + error + "</p>";
        });
    </script>
  </body>
</html>
