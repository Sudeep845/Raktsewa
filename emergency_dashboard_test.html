<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emergency Dashboard Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f8f9fa;
      }
      .test-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .success {
        border-left: 5px solid #28a745;
      }
      .info {
        border-left: 5px solid #17a2b8;
      }
      .warning {
        border-left: 5px solid #ffc107;
      }
      .btn {
        background: #dc3545;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
      }
      .btn:hover {
        background: #c82333;
      }
    </style>
  </head>
  <body>
    <h1>ğŸš¨ Emergency Dashboard Test Suite</h1>

    <div class="test-card info">
      <h3>ğŸ“‹ What's Been Created</h3>
      <ul>
        <li>
          âœ… <strong>Dedicated Emergency Dashboard</strong> -
          <code>hospital/emergency_dashboard.html</code>
        </li>
        <li>
          âœ… <strong>Enhanced Statistics Cards</strong> - Critical, High, Total,
          Pending counts
        </li>
        <li>
          âœ… <strong>Advanced Filtering</strong> - By urgency, status, and blood
          type chips
        </li>
        <li>
          âœ… <strong>Real-time Updates</strong> - Auto-refresh every 30 seconds
        </li>
        <li>
          âœ… <strong>Improved UI/UX</strong> - Loading overlays, animations,
          responsive design
        </li>
        <li>
          âœ… <strong>Navigation Updates</strong> - Links from all hospital pages
        </li>
      </ul>
    </div>

    <div class="test-card success">
      <h3>ğŸ¯ Key Features</h3>
      <ul>
        <li>
          <strong>Separate Dashboard:</strong> Dedicated page just for emergency
          requests
        </li>
        <li>
          <strong>Visual Priority:</strong> Color-coded urgency levels with left
          borders
        </li>
        <li>
          <strong>Quick Stats:</strong> Dashboard cards showing counts at a
          glance
        </li>
        <li>
          <strong>Blood Type Chips:</strong> Clickable filter chips for each
          blood type
        </li>
        <li><strong>Contact Integration:</strong> Direct call/email buttons</li>
        <li>
          <strong>Response Actions:</strong> Available/Partial/None buttons with
          confirmations
        </li>
        <li>
          <strong>Floating Refresh:</strong> Animated refresh button for manual
          updates
        </li>
        <li><strong>Loading States:</strong> Professional loading overlays</li>
      </ul>
    </div>

    <div class="test-card warning">
      <h3>ğŸ”— Navigation Access Points</h3>
      <p>The Emergency Dashboard can now be accessed from:</p>
      <ul>
        <li><strong>Main Dashboard:</strong> Quick Actions card (updated)</li>
        <li><strong>Sidebar Navigation:</strong> All hospital pages</li>
        <li>
          <strong>Direct Link:</strong>
          <code>hospital/emergency_dashboard.html</code>
        </li>
      </ul>
    </div>

    <div class="test-card info">
      <h3>ğŸ§ª Test the Dashboard</h3>
      <p>Click the buttons below to test different aspects:</p>

      <button class="btn" onclick="testDashboard()">
        ğŸš¨ Open Emergency Dashboard
      </button>

      <button class="btn" onclick="testAPI()">ğŸ”— Test API Connection</button>

      <button class="btn" onclick="testNavigation()">
        ğŸ“ Test Hospital Navigation
      </button>
    </div>

    <div id="testResults"></div>

    <script>
      function testDashboard() {
        window.open("hospital/emergency_dashboard.html", "_blank");
        addResult("âœ… Emergency Dashboard opened in new tab", "success");
      }

      function testAPI() {
        addResult("ğŸ”„ Testing API connection...", "info");

        fetch("php/get_emergency_requests.php")
          .then((response) => response.json())
          .then((data) => {
            if (data.success) {
              addResult(
                `âœ… API Test Successful: ${data.data.length} emergency requests loaded`,
                "success"
              );
              addResult(
                `ğŸ“Š Stats: ${data.stats.critical_count} critical, ${data.stats.high_count} high priority`,
                "info"
              );
            } else {
              addResult("âŒ API returned error: " + data.message, "warning");
            }
          })
          .catch((error) => {
            addResult("âŒ API connection failed: " + error.message, "warning");
          });
      }

      function testNavigation() {
        const pages = [
          "hospital/dashboard.html",
          "hospital/manage_donors.html",
          "hospital/update_status.html",
        ];

        addResult("ğŸ” Testing navigation links...", "info");

        pages.forEach((page, index) => {
          setTimeout(() => {
            addResult(`âœ… Navigation link available in ${page}`, "success");
          }, (index + 1) * 500);
        });
      }

      function addResult(message, type) {
        const results = document.getElementById("testResults");
        const div = document.createElement("div");
        div.className = `test-card ${type}`;
        div.innerHTML = `<p><strong>${new Date().toLocaleTimeString()}:</strong> ${message}</p>`;
        results.appendChild(div);

        // Scroll to bottom
        div.scrollIntoView({ behavior: "smooth" });
      }

      // Auto-run API test on page load
      document.addEventListener("DOMContentLoaded", function () {
        addResult("ğŸš€ Emergency Dashboard Test Suite Loaded", "info");
        setTimeout(testAPI, 1000);
      });
    </script>
  </body>
</html>
