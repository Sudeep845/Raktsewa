<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emergency Requests Navigation Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f8f9fa;
      }
      .test-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .success {
        border-left: 5px solid #28a745;
      }
      .info {
        border-left: 5px solid #17a2b8;
      }
      .warning {
        border-left: 5px solid #ffc107;
      }
      .btn {
        background: #dc3545;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
        text-decoration: none;
        display: inline-block;
      }
      .btn:hover {
        background: #c82333;
        color: white;
        text-decoration: none;
      }
      .check-list {
        list-style: none;
        padding: 0;
      }
      .check-list li {
        padding: 8px 0;
        border-bottom: 1px solid #eee;
      }
      .check-list li:before {
        content: "‚úÖ ";
        color: #28a745;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h1>üö® Emergency Requests - No More Modals!</h1>

    <div class="test-card success">
      <h3>‚úÖ Modal Removal Complete</h3>
      <p>
        All Emergency Requests now navigate directly to the dedicated dashboard
        instead of showing popup modals.
      </p>

      <h4>Changes Made:</h4>
      <ul class="check-list">
        <li>
          Removed all Emergency Requests modal HTML from all hospital pages
        </li>
        <li>
          Updated all sidebar links to navigate to emergency_dashboard.html
        </li>
        <li>Changed quick action cards to direct navigation</li>
        <li>Updated all onclick handlers to use window.location.href</li>
        <li>Removed modal-specific JavaScript functions</li>
        <li>Cleaned up modal CSS styles</li>
      </ul>
    </div>

    <div class="test-card info">
      <h3>üîó Navigation Test Links</h3>
      <p>
        Test all Emergency Requests access points - they should all open the
        dedicated dashboard:
      </p>

      <div
        style="
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 15px;
          margin: 20px 0;
        "
      >
        <a href="hospital/dashboard.html" class="btn">Main Dashboard</a>
        <a href="hospital/manage_donors.html" class="btn">Manage Donors</a>
        <a href="hospital/update_status.html" class="btn">Update Status</a>
        <a href="hospital/appointments.html" class="btn">Appointments</a>
        <a href="hospital/emergency_dashboard.html" class="btn"
          >Emergency Dashboard (Direct)</a
        >
      </div>
    </div>

    <div class="test-card warning">
      <h3>üìã What to Test</h3>
      <ol>
        <li>
          <strong>Sidebar Navigation:</strong> Click "Emergency Dashboard" in
          the sidebar of any hospital page
        </li>
        <li>
          <strong>Quick Actions:</strong> Click the Emergency Requests card on
          the main dashboard
        </li>
        <li>
          <strong>View All Buttons:</strong> Any "View All" buttons should
          navigate to the dashboard
        </li>
        <li>
          <strong>No More Modals:</strong> Verify no popup modals appear for
          Emergency Requests
        </li>
        <li>
          <strong>Direct Navigation:</strong> All emergency requests
          functionality should be full-screen
        </li>
      </ol>
    </div>

    <div class="test-card info">
      <h3>üéØ Expected Behavior</h3>
      <ul class="check-list">
        <li>All Emergency Requests links open emergency_dashboard.html</li>
        <li>No popup modals appear anywhere</li>
        <li>Full-screen dedicated dashboard with all features</li>
        <li>Professional interface with statistics cards</li>
        <li>Advanced filtering and real-time updates</li>
        <li>Back navigation to return to main dashboard</li>
      </ul>
    </div>

    <div class="test-card success" id="testResults" style="display: none">
      <h3>üß™ Live Test Results</h3>
      <div id="testOutput"></div>
    </div>

    <script>
      function addResult(message, type = "info") {
        const resultsDiv = document.getElementById("testResults");
        const output = document.getElementById("testOutput");

        resultsDiv.style.display = "block";

        const div = document.createElement("div");
        div.style.padding = "5px 0";
        div.style.borderBottom = "1px solid #eee";
        div.innerHTML = `<strong>${new Date().toLocaleTimeString()}:</strong> ${message}`;
        output.appendChild(div);

        // Scroll to bottom
        div.scrollIntoView({ behavior: "smooth" });
      }

      // Test if emergency dashboard is accessible
      function testEmergencyDashboard() {
        addResult("üîÑ Testing Emergency Dashboard accessibility...", "info");

        fetch("hospital/emergency_dashboard.html")
          .then((response) => {
            if (response.ok) {
              addResult(
                "‚úÖ Emergency Dashboard is accessible and ready",
                "success"
              );
              return response.text();
            }
            throw new Error("Dashboard not accessible");
          })
          .then((html) => {
            if (html.includes("Emergency Blood Requests")) {
              addResult(
                "‚úÖ Emergency Dashboard contains expected content",
                "success"
              );
            } else {
              addResult("‚ö†Ô∏è Dashboard content may be incomplete", "warning");
            }
          })
          .catch((error) => {
            addResult(
              "‚ùå Error accessing Emergency Dashboard: " + error.message,
              "error"
            );
          });
      }

      // Test API connectivity
      function testAPI() {
        addResult("üîÑ Testing Emergency Requests API...", "info");

        fetch("php/get_emergency_requests.php")
          .then((response) => response.json())
          .then((data) => {
            if (data.success) {
              addResult(
                `‚úÖ API working: ${data.data.length} emergency requests available`,
                "success"
              );
            } else {
              addResult("‚ö†Ô∏è API returned error: " + data.message, "warning");
            }
          })
          .catch((error) => {
            addResult("‚ùå API connection failed: " + error.message, "error");
          });
      }

      // Auto-run tests on page load
      document.addEventListener("DOMContentLoaded", function () {
        addResult("üöÄ Starting Emergency Requests Navigation Tests...", "info");
        setTimeout(testEmergencyDashboard, 500);
        setTimeout(testAPI, 1500);
      });
    </script>
  </body>
</html>
